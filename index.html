<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <script src="https://code.jquery.com/jquery.js"></script>
    <title>Trivia Game</title>
  </head>
  <body>
    <div class="row">
      <div class="col-md-12">
        <h1>Trivia Game!</h1>
      </div>
    </div>
    <div class="row">
      <div class="container game">
        <div class="col-md-3">
          <!-- Blank for formatting -->
        </div>
        <div class="col-md-6">
          <p class="current-question"></p>
          <ul>
            <li><button class="possible-answers" id="option-1"></button></li>
            <li><button class="possible-answers" id="option-2"></button></li>
            <li><button class="possible-answers" id="option-3"></button></li>
            <li><button class="possible-answers" id="option-4"></button></li>
          </ul>
          <button id="reset-button">Reset</button>
        </div>
        <div class="col-md-3">
          <!-- Blank for formatting -->
        </div>
      </div>
    </div>
    <script src="assets/javascript/app.js"></script>

    <script>
      let timer;
      let time = 10;

      initialiseHTML();

      function initialiseHTML() {
        init();
        loadQuestion();
      }

      function loadQuestion() {
        let currentQuestion = getNextQuestion();
        if (currentQuestion !== "Game Over") {
          $(".current-question").html(currentQuestion.question);
          $("#option-1").html(currentQuestion.options[0]);
          $("#option-2").html(currentQuestion.options[1]);
          $("#option-3").html(currentQuestion.options[2]);
          $("#option-4").html(currentQuestion.options[3]);

          startTimer();
        } else {
          gameOverScreen();
        }
      }

      function startTimer() {
        timer = setInterval(timerRunning, 1000);
      }

      function timerRunning() {
        time--;
        console.log(time);
        if (time === 0) {
          stopTimer();
          timesUpScreen();
        }
      }

      function stopTimer() {
        clearInterval(timer);
        time = 10;
      }

      $(".possible-answers").on("click", function(event) {
        stopTimer();
        let result = playerGuess($("#" + event.currentTarget.id).html());
        switch (result) {
          case "Win":
            winScreen();
            break;
          case "Lose":
            loseScreen();
            break;
          case "Times Up":
            timesUpScreen();
            break;
          default:
            console.log("Error");
        }
      });

      function winScreen() {
        // Add code for win.
        console.log("You win!");
        refreshScores();
        setTimeout(loadQuestion(), 1000);
      }

      function loseScreen() {
        // Add  CSS for lose.
        console.log("You lose :(");
        refreshScores();
        setTimeout(loadQuestion(), 1000);
      }

      function timesUpScreen() {
        // Add CSS for time out.
        console.log("Time's up!");
        refreshScores();
        setTimeout(loadQuestion(), 1000);
      }

      function gameOverScreen() {
        // Add CSS for game over.
        console.log("Game Over");
      }

      function refreshScores() {
        // Use jQuery to update the wins, loss and remaining questions counter displays.
      }

      $("#reset-button").on("click", function() {
        initialiseHTML();
      });
    </script>
  </body>
</html>
